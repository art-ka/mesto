(()=>{"use strict";var e={318:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=n(643),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=l(t);if(n){var o=l(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this))._sourceLike=e,t}return u(i,null,[{key:"from",value:function(e){return e instanceof s?e:new i(e)}}]),u(i,[{key:"source",value:function(){return this._sourceLike.source()}},{key:"buffer",value:function(){return"function"==typeof this._sourceLike.buffer?this._sourceLike.buffer():o(l(i.prototype),"buffer",this).call(this)}},{key:"size",value:function(){return"function"==typeof this._sourceLike.size?this._sourceLike.size():o(l(i.prototype),"size",this).call(this)}},{key:"map",value:function(e){return"function"==typeof this._sourceLike.map?this._sourceLike.map(e):o(l(i.prototype),"map",this).call(this,e)}},{key:"sourceAndMap",value:function(e){return"function"==typeof this._sourceLike.sourceAndMap?this._sourceLike.sourceAndMap(e):o(l(i.prototype),"sourceAndMap",this).call(this,e)}},{key:"updateHash",value:function(e){if("function"==typeof this._sourceLike.updateHash)return this._sourceLike.updateHash(e);if("function"==typeof this._sourceLike.map)throw new Error("A Source-like object with a 'map' method must also provide an 'updateHash' method");e.update(this.buffer())}}]),i}(s);e.exports=f},643:e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,r;return n=e,(r=[{key:"source",value:function(){throw new Error("Abstract")}},{key:"buffer",value:function(){var e=this.source();return Buffer.isBuffer(e)?e:Buffer.from(e,"utf-8")}},{key:"size",value:function(){return this.buffer().length}},{key:"map",value:function(e){return null}},{key:"sourceAndMap",value:function(e){return{source:this.source(),map:this.map(e)}}},{key:"updateHash",value:function(e){throw new Error("Abstract")}}])&&t(n.prototype,r),e}();e.exports=n}},t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}(()=>{function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r){var o=e.name,i=e.link,u=e.likes,c=e.id,a=r.handleCardClick,l=r.handleDeleteClick,s=r.handleLikeClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=o,this._link=i,this._likes=u,this._id=c,this._template=n,this._handleCardClick=a,this._handleDeleteClick=l,this._handleLikeClick=s}var n,r;return n=t,(r=[{key:"generateCard",value:function(){return this._element=this._template,this._image=this._element.querySelector(".element__image"),this._image.src=this._link,this._image.alt=this._name,this._element.querySelector(".element__title").textContent=this._name,this._likes&&this._likes.length>0&&(this._element.querySelector(".element__likes").innerHTML=this._likes.length,this._likes.find((function(e){return"60e4f7e724f8da16d92e91c2"===e._id}))&&this._element.querySelector(".element__like-image").classList.add("element__like-image-active")),this._displayDeleteButton(),this._setEventListeners(),this._element}},{key:"handleDeleteCard",value:function(){this._element.remove()}},{key:"isLiked",value:function(){return this._element.querySelector(".element__like-image").classList.contains("element__like-image-active")}},{key:"updateLikes",value:function(e){this._likes=e}},{key:"likeCountPlus",value:function(){this._element.querySelector(".element__like-image").classList.add("element__like-image-active");var e=+this._element.querySelector(".element__likes").innerHTML;this._element.querySelector(".element__likes").innerHTML=e+1}},{key:"likeCountMinus",value:function(){this._element.querySelector(".element__like-image").classList.remove("element__like-image-active");var e=this._element.querySelector(".element__likes").innerHTML;this._element.querySelector(".element__likes").innerHTML=e-1}},{key:"_displayDeleteButton",value:function(){this._element.querySelector(".element__delete-button").hidden="60e4f7e724f8da16d92e91c2"!==this._id}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".element__like-image").addEventListener("click",(function(){return e._handleLikeClick()})),this._image.addEventListener("click",(function(){return e._handleCardClick({name:e._name,link:e._link})})),this._element.querySelector(".element__delete-button").addEventListener("click",(function(){return e._handleDeleteClick()}))}}])&&e(n.prototype,r),t}(),r={formSelector:".popup__form",inputSelector:".popup__field",formAdd:".popup_type_add",formEdit:".popup_type_edit",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button-disabled",inputErrorClass:"popup__field-error",errorClass:"popup__field-error-active"},o=(document.querySelector(".popup__image"),document.querySelector(".popup__caption"),document.querySelector(".popup_type_add")),i=document.querySelector(".profile__edit-button"),u=document.querySelector(".profile__add-button"),c=document.querySelector(".profile__user"),a=document.querySelector(".profile__avatar"),l=document.querySelector(".popup__field_input_name"),s=document.querySelector(".popup__field_input_job"),f=document.querySelector(".popup__field_input_avatar"),p=document.querySelector(".popup__field_input_title"),h=document.querySelector(".popup__field_input_url");function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=document.querySelector(n),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));n.classList.add(this._errorClass),n.textContent=t}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?(t.classList.add(this._inactiveButtonClass),t.setAttribute("disabled",!0)):(t.classList.remove(this._inactiveButtonClass),t.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(){var e=this,t=Array.from(this._formElement.querySelectorAll(this._inputSelector)),n=this._formElement.querySelector(this._submitButtonSelector);t.forEach((function(r){r.addEventListener("input",(function(){e._checkInputValidity(r),e.toggleButtonState(t,n)}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&d(t.prototype,n),e}();function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(318);var m=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&_(t.prototype,n),e}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__close").addEventListener("click",(function(){return e.close()})),this._popup.addEventListener("click",(function(t){t.target===t.currentTarget&&e.close(t.currentTarget)}))}}])&&v(t.prototype,n),e}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function u(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,e))._popupImage=document.querySelector(t),r._popupTitle=document.querySelector(n),r}return t=u,(n=[{key:"open",value:function(e,t){this._popupImage.src=t,this._popupTitle.textContent=e,S(E(u.prototype),"open",this).call(this)}}])&&g(t.prototype,n),u}(b);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(r);if(o){var n=T(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return R(this,e)});function u(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,n))._handleFormSubmit=r,t}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this,t=document.querySelectorAll(".popup__field");return this._inputValues={},t.forEach((function(t){e._inputValues[t.name]=t.value})),this._inputValues}},{key:"renderLoading",value:function(e){this._popup.querySelector(".popup__submit-button").textContent=e?"Сохранение...":this._popup.querySelector(".popup__submit-button").value}},{key:"open",value:function(){P(T(u.prototype),"open",this).call(this),this.renderLoading(!1)}},{key:"close",value:function(){P(T(u.prototype),"close",this).call(this),this._popup.querySelector("form").reset()}},{key:"setEventListeners",value:function(e){var t=this;P(T(u.prototype),"setEventListeners",this).call(this,e),this._popup.addEventListener("submit",(function(e){e.preventDefault(),t.renderLoading(!0),t._handleFormSubmit(t._getInputValues())}))}}])&&j(t.prototype,n),u}(b);function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.titleSelector=document.querySelector(".profile__title"),this.subtitleSelector=document.querySelector(".profile__subtitle"),this.avatar=document.querySelector(".profile__avatar")}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this.titleSelector.textContent,about:this.subtitleSelector.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about,r=e.avatar;this.titleSelector.textContent=t,this.subtitleSelector.textContent=n,r&&(this.avatar.src=r)}},{key:"getUserAvatar",value:function(){return{avatar:this.avatar.src}}},{key:"setAvatar",value:function(e){var t=e.avatar;this.avatar.src=t}}])&&D(t.prototype,n),e}();function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch("https://mesto.nomoreparties.co/v1/cohort-17/cards",{headers:{authorization:"ef890c66-d7a0-4a1d-a482-7b78f3f64350"}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"addCard",value:function(e,t){return fetch("https://mesto.nomoreparties.co/v1/cohort-17/cards",{method:"POST",headers:this.headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"takeUserInfo",value:function(){return fetch("https://mesto.nomoreparties.co/v1/cohort-17/users/me",{headers:{authorization:"ef890c66-d7a0-4a1d-a482-7b78f3f64350"}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"changeAvatar",value:function(e){return fetch("https://mesto.nomoreparties.co/v1/cohort-17/users/me/avatar",{method:"PATCH",headers:{authorization:"ef890c66-d7a0-4a1d-a482-7b78f3f64350","Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"editInfo",value:function(e,t){return fetch("https://mesto.nomoreparties.co/v1/cohort-17/users/me",{method:"PATCH",headers:{authorization:"ef890c66-d7a0-4a1d-a482-7b78f3f64350","Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"likeCard",value:function(e){return fetch("https://mesto.nomoreparties.co/v1/cohort-17/cards/likes/".concat(e),{method:"PUT",headers:{authorization:"ef890c66-d7a0-4a1d-a482-7b78f3f64350"}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"deleteLikeCard",value:function(e){return fetch("https://mesto.nomoreparties.co/v1/cohort-17/cards/likes/".concat(e),{method:"DELETE",headers:{authorization:"ef890c66-d7a0-4a1d-a482-7b78f3f64350"}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"deleteCard",value:function(e){return fetch("https://mesto.nomoreparties.co/v1/cohort-17/cards/".concat(e),{method:"DELETE",headers:{authorization:"ef890c66-d7a0-4a1d-a482-7b78f3f64350"}}).then((function(e){return e.ok?e:Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))}}])&&x(t.prototype,n),e}();function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t,n){return(U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=N(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=N(r);if(o){var n=N(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return F(this,e)});function u(){return z(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"open",value:function(e){U(N(u.prototype),"open",this).call(this),this._confirmCb=e}},{key:"setEventListeners",value:function(){var e=this;U(N(u.prototype),"setEventListeners",this).call(this),document.querySelector(".popup__submit-button-delete").addEventListener("click",(function(){e._confirmCb()}))}}])&&H(t.prototype,n),u}(b),G=new B({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-17",headers:{authorization:"ef890c66-d7a0-4a1d-a482-7b78f3f64350","Content-Type":"application/json"}}),K=new A,Q=function(){return document.querySelector("#elements").content.querySelector(".element__cards").cloneNode(!0)},W=new L(".popup_type_img",".popup__image",".popup__caption");W.setEventListeners();var X=new m({items:Y,renderer:function(e){var n=new t({name:e.name,link:e.link,likes:e.likes,id:e.owner._id},Q(),{handleCardClick:function(e){var t=e.name,n=e.link;W.open(t,n)},handleDeleteClick:function(){Z.open((function(){G.deleteCard(e._id).then((function(){return n.handleDeleteCard()})),Z.close()}))},handleLikeClick:function(){n.isLiked()?G.deleteLikeCard(e._id).then((function(){return n.likeCountMinus()})):G.likeCard(e._id).then((function(){return n.likeCountPlus()}))}});X.addItem(n.generateCard())}},".element"),Y=G.getInitialCards().then((function(e){X.renderItems(e)})),Z=new J(".popup_type_delete");Z.setEventListeners();var $=new I({popupSelector:".popup_type_add",handleFormSubmit:function(){var e=p.value,n=h.value;G.addCard(e,n).then((function(e){var n=new t({name:e.name,link:e.link,id:e.owner._id},Q(),{handleCardClick:function(e){var t=e.name,n=e.link;W.open(t,n)},handleDeleteClick:function(){Z.open((function(){G.deleteCard(e._id).then((function(){return n.handleDeleteCard()})),Z.close()}))},handleLikeClick:function(){n.isLiked()?G.deleteLikeCard(e._id).then((function(){return n.likeCountMinus()})):G.likeCard(e._id).then((function(){return n.likeCountPlus()}))}});X.addItem(n.generateCard()),$.close()}))}});$.setEventListeners(),u.addEventListener("click",(function(){$.open();var e=Array.from(o.querySelectorAll(".popup__field")),t=o.querySelector(".popup__submit-button");ne.toggleButtonState(e,t)}));var ee=new I({popupSelector:".popup_type_edit",handleFormSubmit:function(e){var t=l.value,n=s.value;G.editInfo(t,n).then((function(e){return e})),K.setUserInfo({name:e.fullname,about:e.job}),ee.close()}});G.takeUserInfo().then((function(e){K.setUserInfo({name:e.name,about:e.about,avatar:e.avatar})})),i.addEventListener("click",(function(){var e=K.getUserInfo();l.value=e.name,s.value=e.about,ee.open()})),ee.setEventListeners();var te=new I({popupSelector:".popup_type_avatar",handleFormSubmit:function(e){var t=f.value;G.changeAvatar(t).then((function(e){return e})),K.setAvatar({avatar:e.avatar}),te.close()}});c.addEventListener("click",(function(){f.value=a.src,te.open()})),te.setEventListeners();var ne=new y(r,r.formAdd);ne.enableValidation(),new y(r,r.formEdit).enableValidation()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL25vZGVfbW9kdWxlcy93ZWJwYWNrLXNvdXJjZXMvbGliL0NvbXBhdFNvdXJjZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL25vZGVfbW9kdWxlcy93ZWJwYWNrLXNvdXJjZXMvbGliL1NvdXJjZS5qcyIsIndlYnBhY2s6Ly9tZXN0by93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhCdXR0b24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwibmFtZXMiOlsiU291cmNlIiwicmVxdWlyZSIsIkNvbXBhdFNvdXJjZSIsInNvdXJjZUxpa2UiLCJfc291cmNlTGlrZSIsInRoaXMiLCJzb3VyY2UiLCJidWZmZXIiLCJzaXplIiwib3B0aW9ucyIsIm1hcCIsInNvdXJjZUFuZE1hcCIsImhhc2giLCJ1cGRhdGVIYXNoIiwiRXJyb3IiLCJ1cGRhdGUiLCJtb2R1bGUiLCJleHBvcnRzIiwiQnVmZmVyIiwiaXNCdWZmZXIiLCJmcm9tIiwibGVuZ3RoIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIkNhcmQiLCJ0ZW1wbGF0ZSIsIm5hbWUiLCJsaW5rIiwibGlrZXMiLCJpZCIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwiX25hbWUiLCJfbGluayIsIl9saWtlcyIsIl9pZCIsIl90ZW1wbGF0ZSIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2VsZW1lbnQiLCJfaW1hZ2UiLCJxdWVyeVNlbGVjdG9yIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJpbm5lckhUTUwiLCJmaW5kIiwibGlrZSIsImNsYXNzTGlzdCIsImFkZCIsIl9kaXNwbGF5RGVsZXRlQnV0dG9uIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwicmVtb3ZlIiwiY29udGFpbnMiLCJjdXJyZW50VmFsdWUiLCJoaWRkZW4iLCJhZGRFdmVudExpc3RlbmVyIiwicGFyYW1zIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsImZvcm1BZGQiLCJmb3JtRWRpdCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJwb3B1cEFkZCIsImRvY3VtZW50IiwicHJvZmlsZUVkaXRCdXR0b24iLCJhZGRDYXJkQnV0dG9uIiwicHJvZmlsZUF2YXRhckJ1dHRvbiIsImF2YXRhciIsImlucHV0c05hbWUiLCJpbnB1dHNKb2IiLCJpbnB1dHNBdmF0YXIiLCJpbnB1dHNUaXRsZSIsImlucHV0c1VybCIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dExpc3QiLCJzb21lIiwiYnV0dG9uRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJBcnJheSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJkYXRhIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJQb3B1cFdpdGhJbWFnZSIsInBvcHVwSW1hZ2UiLCJwb3B1cFRpdGxlIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBUaXRsZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJ1c2VySW5wdXRzIiwiX2lucHV0VmFsdWVzIiwidmFsdWUiLCJpc0xvYWRpbmciLCJyZW5kZXJMb2FkaW5nIiwicmVzZXQiLCJwb3B1cCIsIl9nZXRJbnB1dFZhbHVlcyIsIlVzZXJJbmZvIiwidGl0bGVTZWxlY3RvciIsInN1YnRpdGxlU2VsZWN0b3IiLCJhYm91dCIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiZmV0Y2giLCJhdXRob3JpemF0aW9uIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJpbnB1dFRpdGxlIiwiaW5wdXRVcmwiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImlucHV0QXZhdGFyIiwiaW5wdXROYW1lIiwiaW5wdXRBYm91dCIsIlBvcHVwV2l0aEJ1dHRvbiIsImNvbmZpcm1DYiIsIl9jb25maXJtQ2IiLCJhcGkiLCJ1c2VySW5mbyIsImdlbmVyYXRlQ2FyZFRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsInNldEV2ZW50TGlzdGVuZXJzIiwiY2FyZHNMaXN0IiwiZ2V0Q2FyZEVsZW1lbnQiLCJjYXJkRWxlbWVudCIsIm93bmVyIiwib3BlbiIsInBvcHVwRGVsZXRlIiwiZGVsZXRlQ2FyZCIsImhhbmRsZURlbGV0ZUNhcmQiLCJpc0xpa2VkIiwiZGVsZXRlTGlrZUNhcmQiLCJsaWtlQ291bnRNaW51cyIsImxpa2VDYXJkIiwibGlrZUNvdW50UGx1cyIsImFkZEl0ZW0iLCJnZW5lcmF0ZUNhcmQiLCJnZXRJbml0aWFsQ2FyZHMiLCJyZW5kZXJJdGVtcyIsImFkZENhcmQiLCJmb3JtQWRkVmFsaWRhdG9yIiwiZWRpdEluZm8iLCJzZXRVc2VySW5mbyIsImZ1bGxuYW1lIiwiam9iIiwidGFrZVVzZXJJbmZvIiwicHJvZmlsZSIsImdldFVzZXJJbmZvIiwiZm9ybUF2YXRhciIsImNoYW5nZUF2YXRhciIsInNldEF2YXRhciIsImVuYWJsZVZhbGlkYXRpb24iXSwibWFwcGluZ3MiOiIrcUNBTUEsSUFBTUEsRUFBU0MsRUFBUSxLQUVqQkMsRSw4b0JBT0wsV0FBWUMsR0FBWSxhLDRGQUFBLFVBQ3ZCLGdCQUNLQyxZQUFjRCxFQUZJLEUsNENBTlpBLEdBQ1gsT0FBT0EsYUFBc0JILEVBQzFCRyxFQUNBLElBQUlE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Q2xDeUksR0FBV25GLFdBSW5CdkQsRUFBb0JkLGlCQUFpQixTQUFTLFdBQzFDa0IsUUFBcUJILEVBQU83QixJQUU1QnNLLEdBQVd0QixVQUdmc0IsR0FBVzNCLG9CQUdYLElBQU1tQixHQUFtQixJQUFJM0gsRUFBY3BCLEVBQVFBLEVBQU9HLFNBQzFENEksR0FBaUJXLG1CQUVTLElBQUl0SSxFQUFjcEIsRUFBUUEsRUFBT0ksVUFDekNzSixvQiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cblwidXNlIHN0cmljdFwiO1xuXG5jb25zdCBTb3VyY2UgPSByZXF1aXJlKFwiLi9Tb3VyY2VcIik7XG5cbmNsYXNzIENvbXBhdFNvdXJjZSBleHRlbmRzIFNvdXJjZSB7XG5cdHN0YXRpYyBmcm9tKHNvdXJjZUxpa2UpIHtcblx0XHRyZXR1cm4gc291cmNlTGlrZSBpbnN0YW5jZW9mIFNvdXJjZVxuXHRcdFx0PyBzb3VyY2VMaWtlXG5cdFx0XHQ6IG5ldyBDb21wYXRTb3VyY2Uoc291cmNlTGlrZSk7XG5cdH1cblxuXHRjb25zdHJ1Y3Rvcihzb3VyY2VMaWtlKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLl9zb3VyY2VMaWtlID0gc291cmNlTGlrZTtcblx0fVxuXG5cdHNvdXJjZSgpIHtcblx0XHRyZXR1cm4gdGhpcy5fc291cmNlTGlrZS5zb3VyY2UoKTtcblx0fVxuXG5cdGJ1ZmZlcigpIHtcblx0XHRpZiAodHlwZW9mIHRoaXMuX3NvdXJjZUxpa2UuYnVmZmVyID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdHJldHVybiB0aGlzLl9zb3VyY2VMaWtlLmJ1ZmZlcigpO1xuXHRcdH1cblx0XHRyZXR1cm4gc3VwZXIuYnVmZmVyKCk7XG5cdH1cblxuXHRzaXplKCkge1xuXHRcdGlmICh0eXBlb2YgdGhpcy5fc291cmNlTGlrZS5zaXplID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdHJldHVybiB0aGlzLl9zb3VyY2VMaWtlLnNpemUoKTtcblx0XHR9XG5cdFx0cmV0dXJuIHN1cGVyLnNpemUoKTtcblx0fVxuXG5cdG1hcChvcHRpb25zKSB7XG5cdFx0aWYgKHR5cGVvZiB0aGlzLl9zb3VyY2VMaWtlLm1hcCA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fc291cmNlTGlrZS5tYXAob3B0aW9ucyk7XG5cdFx0fVxuXHRcdHJldHVybiBzdXBlci5tYXAob3B0aW9ucyk7XG5cdH1cblxuXHRzb3VyY2VBbmRNYXAob3B0aW9ucykge1xuXHRcdGlmICh0eXBlb2YgdGhpcy5fc291cmNlTGlrZS5zb3VyY2VBbmRNYXAgPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0cmV0dXJuIHRoaXMuX3NvdXJjZUxpa2Uuc291cmNlQW5kTWFwKG9wdGlvbnMpO1xuXHRcdH1cblx0XHRyZXR1cm4gc3VwZXIuc291cmNlQW5kTWFwKG9wdGlvbnMpO1xuXHR9XG5cblx0dXBkYXRlSGFzaChoYXNoKSB7XG5cdFx0aWYgKHR5cGVvZiB0aGlzLl9zb3VyY2VMaWtlLnVwZGF0ZUhhc2ggPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0cmV0dXJuIHRoaXMuX3NvdXJjZUxpa2UudXBkYXRlSGFzaChoYXNoKTtcblx0XHR9XG5cdFx0aWYgKHR5cGVvZiB0aGlzLl9zb3VyY2VMaWtlLm1hcCA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXG5cdFx0XHRcdFwiQSBTb3VyY2UtbGlrZSBvYmplY3Qgd2l0aCBhICdtYXAnIG1ldGhvZCBtdXN0IGFsc28gcHJvdmlkZSBhbiAndXBkYXRlSGFzaCcgbWV0aG9kXCJcblx0XHRcdCk7XG5cdFx0fVxuXHRcdGhhc2gudXBkYXRlKHRoaXMuYnVmZmVyKCkpO1xuXHR9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ29tcGF0U291cmNlO1xuIiwiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cblwidXNlIHN0cmljdFwiO1xuXG5jbGFzcyBTb3VyY2Uge1xuXHRzb3VyY2UoKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiQWJzdHJhY3RcIik7XG5cdH1cblxuXHRidWZmZXIoKSB7XG5cdFx0Y29uc3Qgc291cmNlID0gdGhpcy5zb3VyY2UoKTtcblx0XHRpZiAoQnVmZmVyLmlzQnVmZmVyKHNvdXJjZSkpIHJldHVybiBzb3VyY2U7XG5cdFx0cmV0dXJuIEJ1ZmZlci5mcm9tKHNvdXJjZSwgXCJ1dGYtOFwiKTtcblx0fVxuXG5cdHNpemUoKSB7XG5cdFx0cmV0dXJuIHRoaXMuYnVmZmVyKCkubGVuZ3RoO1xuXHR9XG5cblx0bWFwKG9wdGlvbnMpIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdHNvdXJjZUFuZE1hcChvcHRpb25zKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHNvdXJjZTogdGhpcy5zb3VyY2UoKSxcblx0XHRcdG1hcDogdGhpcy5tYXAob3B0aW9ucylcblx0XHR9O1xuXHR9XG5cblx0dXBkYXRlSGFzaChoYXNoKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiQWJzdHJhY3RcIik7XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTb3VyY2U7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsImV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmssIGxpa2VzLCBpZCB9LCB0ZW1wbGF0ZSwgeyBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrLCBoYW5kbGVMaWtlQ2xpY2sgfSkge1xuICAgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgICAgIHRoaXMuX2xpa2VzID0gbGlrZXM7XG4gICAgICAgIHRoaXMuX2lkID0gaWQ7XG4gICAgICAgIHRoaXMuX3RlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICAgIH1cblxuICAgIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX3RlbXBsYXRlO1xuICAgICAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2ltYWdlJyk7XG4gICAgICAgIHRoaXMuX2ltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgICAgIHRoaXMuX2ltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgICAgICBpZiAodGhpcy5fbGlrZXMgJiYgdGhpcy5fbGlrZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZXMnKS5pbm5lckhUTUwgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG4vL9C+0YLQvtCx0YDQsNC20LXQvdC40LUg0LDQutGC0LjQstC90L7Qs9C+INGN0LvQtdC80LXQvdGC0LAg0LvQsNC50Log0L/QvtGB0LvQtSDQv9C10YDQtdC30LDQs9GA0YPQt9C60Lgg0YHRgtGA0LDQvdC40YbRi1xuICAgICAgICAgICAgaWYgKHRoaXMuX2xpa2VzLmZpbmQoKGxpa2UpID0+IGxpa2UuX2lkID09PSBcIjYwZTRmN2U3MjRmOGRhMTZkOTJlOTFjMlwiKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWltYWdlJykuY2xhc3NMaXN0LmFkZCgnZWxlbWVudF9fbGlrZS1pbWFnZS1hY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2Rpc3BsYXlEZWxldGVCdXR0b24oKTtcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgICB9XG5cbiAgICBoYW5kbGVEZWxldGVDYXJkKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIH1cblxuICAgIGlzTGlrZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWltYWdlJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdlbGVtZW50X19saWtlLWltYWdlLWFjdGl2ZScpO1xuICAgIH1cblxuICAgIHVwZGF0ZUxpa2VzKGxpa2VzKSB7XG4gICAgICAgIHRoaXMuX2xpa2VzID0gbGlrZXM7XG4gICAgfVxuXG4gICAgbGlrZUNvdW50UGx1cygpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWltYWdlJykuY2xhc3NMaXN0LmFkZCgnZWxlbWVudF9fbGlrZS1pbWFnZS1hY3RpdmUnKTtcbiAgICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gK3RoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2VzJykuaW5uZXJIVE1MO1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlcycpLmlubmVySFRNTCA9IGN1cnJlbnRWYWx1ZSArIDE7XG4gICAgfVxuXG4gICAgbGlrZUNvdW50TWludXMoKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZS1pbWFnZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2VsZW1lbnRfX2xpa2UtaW1hZ2UtYWN0aXZlJyk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2VzJykuaW5uZXJIVE1MO1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlcycpLmlubmVySFRNTCA9IGN1cnJlbnRWYWx1ZSAtIDE7XG4gICAgfVxuXG4gICAgX2Rpc3BsYXlEZWxldGVCdXR0b24oKSB7XG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2RlbGV0ZS1idXR0b24nKVxuICAgICAgICBkZWxldGVCdXR0b24uaGlkZGVuID0gdGhpcy5faWQgIT09IFwiNjBlNGY3ZTcyNGY4ZGExNmQ5MmU5MWMyXCI7XG4gICAgfVxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UtaW1hZ2UnKVxuICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVMaWtlQ2xpY2soKSk7XG5cbiAgICAgICAgdGhpcy5faW1hZ2VcbiAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUNhcmRDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSkpO1xuXG4gICAgICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fZGVsZXRlLWJ1dHRvbicpXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVDbGljaygpKTtcblxuICAgIH1cblxufSIsImV4cG9ydCBjb25zdCBwYXJhbXMgPSB7XG4gICAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcbiAgICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19maWVsZCcsXG4gICAgZm9ybUFkZDogJy5wb3B1cF90eXBlX2FkZCcsXG4gICAgZm9ybUVkaXQ6ICcucG9wdXBfdHlwZV9lZGl0JyxcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc3VibWl0LWJ1dHRvbicsXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19zdWJtaXQtYnV0dG9uLWRpc2FibGVkJyxcbiAgICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9fZmllbGQtZXJyb3InLFxuICAgIGVycm9yQ2xhc3M6ICdwb3B1cF9fZmllbGQtZXJyb3ItYWN0aXZlJ1xufVxuXG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcbmV4cG9ydCBjb25zdCBwb3B1cFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jYXB0aW9uJyk7XG5cbmV4cG9ydCBjb25zdCBwb3B1cEFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2FkZCcpO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3VzZXInKTtcbmV4cG9ydCBjb25zdCBhdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XG5cbmV4cG9ydCBjb25zdCBpbnB1dHNOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19maWVsZF9pbnB1dF9uYW1lJyk7XG5leHBvcnQgY29uc3QgaW5wdXRzSm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19maWVsZF9pbnB1dF9qb2InKTtcblxuZXhwb3J0IGNvbnN0IGlucHV0c0F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZmllbGRfaW5wdXRfYXZhdGFyJyk7XG5cbmV4cG9ydCBjb25zdCBpbnB1dHNUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZmllbGRfaW5wdXRfdGl0bGUnKTtcbmV4cG9ydCBjb25zdCBpbnB1dHNVcmwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ZpZWxkX2lucHV0X3VybCcpO1xuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcywgZm9ybUVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1FbGVtZW50KTtcbiAgICAgICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHBhcmFtcy5pbnB1dFNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHBhcmFtcy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHBhcmFtcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgICAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBwYXJhbXMuaW5wdXRFcnJvckNsYXNzO1xuICAgICAgICB0aGlzLl9lcnJvckNsYXNzID0gcGFyYW1zLmVycm9yQ2xhc3M7XG4gICAgfVxuXG4gICAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcblxuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIH07XG5cbiAgICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcblxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gICAgfTtcblxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XG4gICAgICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcbiAgICB9O1xuXG4gICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KSB7XG4gICAgICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xuICAgICAgICBjb25zdCBidXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgICAgICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgICAgIGNvbnN0IHN1Ym1pdEZvcm1IYW5kbGVyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHN1Ym1pdEZvcm1IYW5kbGVyKTtcblxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIH07XG59IiwiaW1wb3J0IHsgZnJvbSB9IGZyb20gXCJ3ZWJwYWNrLXNvdXJjZXMvbGliL0NvbXBhdFNvdXJjZVwiO1xuXG5leHBvcnQgY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIHJlbmRlckl0ZW1zKGRhdGEpIHtcbiAgICAgICAgZGF0YS5mb3JFYWNoKGl0ZW0gPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xuICAgIH1cblxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgICB9XG59XG5cbiIsIlxuZXhwb3J0IGNsYXNzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTsgXG4gICAgfVxuXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgICAgICAgICAgICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIGNvbnN0IHBvcHVwQ2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlJyk7XG4gICAgICAgIHBvcHVwQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuXG5cbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldCAhPT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuY2xvc2UoZXZ0LmN1cnJlbnRUYXJnZXQpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgcG9wdXBJbWFnZSwgcG9wdXBUaXRsZSkge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fcG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBJbWFnZSk7XG4gICAgICAgIHRoaXMuX3BvcHVwVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwVGl0bGUpO1xuICAgIH1cblxuICAgIG9wZW4obmFtZSwgbGluaykge1xuICAgICAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XG4gICAgICAgIHRoaXMuX3BvcHVwVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgICBzdXBlci5vcGVuKCk7XG4gICAgfVxufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdH0pIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIH1cblxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgdXNlcklucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9fZmllbGQnKTtcbiAgICAgICAgdGhpcy5faW5wdXRWYWx1ZXMgPSB7fTtcbiAgICAgICAgdXNlcklucHV0cy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9pbnB1dFZhbHVlc1tpdGVtLm5hbWVdID0gaXRlbS52YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnB1dFZhbHVlcztcbiAgICB9XG5cbiAgICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xuICAgICAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICAgICAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3N1Ym1pdC1idXR0b24nKS50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3N1Ym1pdC1idXR0b24nKS50ZXh0Q29udGVudCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc3VibWl0LWJ1dHRvbicpLnZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb3BlbigpIHtcbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgICAgICB0aGlzLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICBzdXBlci5jbG9zZSgpO1xuICAgICAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCdmb3JtJykucmVzZXQoKTsgXG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMocG9wdXApIHtcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMocG9wdXApO1xuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICAgIH0pXG4gICAgfVxufVxuXG5cbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudGl0bGVTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX190aXRsZScpO1xuICAgICAgICB0aGlzLnN1YnRpdGxlU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fc3VidGl0bGUnKTtcbiAgICAgICAgdGhpcy5hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XG4gICAgfVxuXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLnRpdGxlU2VsZWN0b3IudGV4dENvbnRlbnQsXG4gICAgICAgICAgICBhYm91dDogdGhpcy5zdWJ0aXRsZVNlbGVjdG9yLnRleHRDb250ZW50LFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0pIHtcbiAgICAgICAgdGhpcy50aXRsZVNlbGVjdG9yLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgdGhpcy5zdWJ0aXRsZVNlbGVjdG9yLnRleHRDb250ZW50ID0gYWJvdXQ7XG4gICAgICAgIGlmKGF2YXRhcikge1xuICAgICAgICB0aGlzLmF2YXRhci5zcmMgPSBhdmF0YXI7XG4gICAgfVxuICAgIH1cblxuICAgIGdldFVzZXJBdmF0YXIoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhdmF0YXI6IHRoaXMuYXZhdGFyLnNyYyxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEF2YXRhcih7IGF2YXRhciB9KSB7XG4gICAgICAgIHRoaXMuYXZhdGFyLnNyYyA9IGF2YXRhcjtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgQXBpIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcbiAgICAgICAgdGhpcy5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICAgIH1cblxuICAgIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKCdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTE3L2NhcmRzJywge1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246ICdlZjg5MGM2Ni1kN2EwLTRhMWQtYTQ4Mi03Yjc4ZjNmNjQzNTAnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8g0LXRgdC70Lgg0L7RiNC40LHQutCwLCDQvtGC0LrQu9C+0L3Rj9C10Lwg0L/RgNC+0LzQuNGBXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gICAgICAgICAgICB9KVxuICAgIH1cblxuICAgIGFkZENhcmQoaW5wdXRUaXRsZSwgaW5wdXRVcmwpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKCdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTE3L2NhcmRzJywge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgXG4gICAgICAgICAgICAgICAgbmFtZTogaW5wdXRUaXRsZSwgXG4gICAgICAgICAgICAgICAgbGluazogaW5wdXRVcmwgXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyDQtdGB0LvQuCDQvtGI0LjQsdC60LAsINC+0YLQutC70L7QvdGP0LXQvCDQv9GA0L7QvNC40YFcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vINCy0YvQstC10LTQtdC8INC+0YjQuNCx0LrRgyDQsiDQutC+0L3RgdC+0LvRjFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHRha2VVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKCdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTE3L3VzZXJzL21lJywge1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246ICdlZjg5MGM2Ni1kN2EwLTRhMWQtYTQ4Mi03Yjc4ZjNmNjQzNTAnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8g0LXRgdC70Lgg0L7RiNC40LHQutCwLCDQvtGC0LrQu9C+0L3Rj9C10Lwg0L/RgNC+0LzQuNGBXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gICAgICAgICAgICB9KVxuICAgIH1cblxuICAgIGNoYW5nZUF2YXRhcihpbnB1dEF2YXRhcikge1xuICAgICAgICByZXR1cm4gZmV0Y2goJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMTcvdXNlcnMvbWUvYXZhdGFyJywge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogJ2VmODkwYzY2LWQ3YTAtNGExZC1hNDgyLTdiNzhmM2Y2NDM1MCcsXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgXG4gICAgICAgICAgICAgICAgYXZhdGFyOiBpbnB1dEF2YXRhclxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyDQtdGB0LvQuCDQvtGI0LjQsdC60LAsINC+0YLQutC70L7QvdGP0LXQvCDQv9GA0L7QvNC40YFcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOyAvLyDQstGL0LLQtdC00LXQvCDQvtGI0LjQsdC60YMg0LIg0LrQvtC90YHQvtC70YxcbiAgICAgICAgICAgIH0pXG4gICAgfVxuXG4gICAgZWRpdEluZm8oaW5wdXROYW1lLCBpbnB1dEFib3V0KSB7XG4gICAgICAgIHJldHVybiBmZXRjaCgnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0xNy91c2Vycy9tZScsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246ICdlZjg5MGM2Ni1kN2EwLTRhMWQtYTQ4Mi03Yjc4ZjNmNjQzNTAnLFxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IFxuICAgICAgICAgICAgICAgIG5hbWU6IGlucHV0TmFtZSwgXG4gICAgICAgICAgICAgICAgYWJvdXQ6IGlucHV0QWJvdXRcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8g0LXRgdC70Lgg0L7RiNC40LHQutCwLCDQvtGC0LrQu9C+0L3Rj9C10Lwg0L/RgNC+0LzQuNGBXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gICAgICAgICAgICB9KVxuICAgIH1cblxuICAgIGxpa2VDYXJkKF9pZCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYGh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMTcvY2FyZHMvbGlrZXMvJHtfaWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246ICdlZjg5MGM2Ni1kN2EwLTRhMWQtYTQ4Mi03Yjc4ZjNmNjQzNTAnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyDQtdGB0LvQuCDQvtGI0LjQsdC60LAsINC+0YLQutC70L7QvdGP0LXQvCDQv9GA0L7QvNC40YFcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOyAvLyDQstGL0LLQtdC00LXQvCDQvtGI0LjQsdC60YMg0LIg0LrQvtC90YHQvtC70YxcbiAgICAgICAgICAgIH0pXG4gICAgfVxuXG4gICAgZGVsZXRlTGlrZUNhcmQoX2lkKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0xNy9jYXJkcy9saWtlcy8ke19pZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogJ2VmODkwYzY2LWQ3YTAtNGExZC1hNDgyLTdiNzhmM2Y2NDM1MCcsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8g0LXRgdC70Lgg0L7RiNC40LHQutCwLCDQvtGC0LrQu9C+0L3Rj9C10Lwg0L/RgNC+0LzQuNGBXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gICAgICAgICAgICB9KVxuICAgIH1cblxuICAgIGRlbGV0ZUNhcmQoX2lkKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0xNy9jYXJkcy8ke19pZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogJ2VmODkwYzY2LWQ3YTAtNGExZC1hNDgyLTdiNzhmM2Y2NDM1MCcsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyDQtdGB0LvQuCDQvtGI0LjQsdC60LAsINC+0YLQutC70L7QvdGP0LXQvCDQv9GA0L7QvNC40YFcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gICAgICAgICAgICB9KVxuICAgIH1cbn1cblxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEJ1dHRvbiBleHRlbmRzIFBvcHVwIHtcbiAgICBvcGVuKGNvbmZpcm1DYikge1xuICAgICAgICBzdXBlci5vcGVuKCk7XG4gICAgICAgIHRoaXMuX2NvbmZpcm1DYiA9IGNvbmZpcm1DYjtcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgY29uc3QgY29uZmlybUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc3VibWl0LWJ1dHRvbi1kZWxldGUnKTsgXG4gICAgICAgIGNvbmZpcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9jb25maXJtQ2IoKTtcbiAgICAgICAgfSlcbiAgICB9XG59IiwiaW1wb3J0IHsgQ2FyZCB9IGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQge1xuICAgIHBhcmFtcywgcG9wdXBBZGQsIGFkZENhcmRCdXR0b24sIHByb2ZpbGVFZGl0QnV0dG9uLCBpbnB1dHNOYW1lLCBpbnB1dHNKb2IsXG4gICAgaW5wdXRzQXZhdGFyLCBwcm9maWxlQXZhdGFyQnV0dG9uLCBpbnB1dHNUaXRsZSwgaW5wdXRzVXJsLCBhdmF0YXJcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnQuanMnO1xuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgeyBBcGkgfSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XG5pbXBvcnQgeyBQb3B1cFdpdGhCdXR0b24gfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEJ1dHRvbi5qcyc7XG5pbXBvcnQgJy4vaW5kZXguY3NzJztcblxuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgICBiYXNlVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0xNycsXG4gICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiAnZWY4OTBjNjYtZDdhMC00YTFkLWE0ODItN2I3OGYzZjY0MzUwJyxcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgIH1cbn0pO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbygpO1xuXG5jb25zdCBnZW5lcmF0ZUNhcmRUZW1wbGF0ZSA9ICgpID0+IGRvY3VtZW50XG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIjZWxlbWVudHNcIilcbiAgICAuY29udGVudFxuICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fY2FyZHMnKVxuICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbmNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF90eXBlX2ltZycsICcucG9wdXBfX2ltYWdlJywgJy5wb3B1cF9fY2FwdGlvbicpO1xucG9wdXBJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5cbmNvbnN0IGNhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKHtcbiAgICBpdGVtczogZ2V0Q2FyZEVsZW1lbnQsXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoeyBuYW1lOiBpdGVtLm5hbWUsIGxpbms6IGl0ZW0ubGluaywgbGlrZXM6IGl0ZW0ubGlrZXMsIGlkOiBpdGVtLm93bmVyLl9pZCB9LCBnZW5lcmF0ZUNhcmRUZW1wbGF0ZSgpLCB7XG4gICAgICAgICAgICBoYW5kbGVDYXJkQ2xpY2s6ICh7IG5hbWUsIGxpbmsgfSkgPT4ge1xuICAgICAgICAgICAgICAgIHBvcHVwSW1hZ2Uub3BlbihuYW1lLCBsaW5rKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoYW5kbGVEZWxldGVDbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHBvcHVwRGVsZXRlLm9wZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhcGkuZGVsZXRlQ2FyZChpdGVtLl9pZCkudGhlbigoKSA9PiBjYXJkRWxlbWVudC5oYW5kbGVEZWxldGVDYXJkKCkpO1xuICAgICAgICAgICAgICAgICAgICBwb3B1cERlbGV0ZS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhhbmRsZUxpa2VDbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjYXJkRWxlbWVudC5pc0xpa2VkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXBpLmRlbGV0ZUxpa2VDYXJkKGl0ZW0uX2lkKS50aGVuKCgpID0+IGNhcmRFbGVtZW50Lmxpa2VDb3VudE1pbnVzKCkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFwaS5saWtlQ2FyZChpdGVtLl9pZCkudGhlbigoKSA9PiBjYXJkRWxlbWVudC5saWtlQ291bnRQbHVzKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2FyZHNMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQuZ2VuZXJhdGVDYXJkKCkpO1xuICAgIH1cbn0sXG4gICAgJy5lbGVtZW50J1xuKVxuXG5jb25zdCBnZXRDYXJkRWxlbWVudCA9IGFwaS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKChkYXRhKSA9PiB7XG4gICAgY2FyZHNMaXN0LnJlbmRlckl0ZW1zKGRhdGEpO1xufSk7XG5cblxuY29uc3QgcG9wdXBEZWxldGUgPSBuZXcgUG9wdXBXaXRoQnV0dG9uKCcucG9wdXBfdHlwZV9kZWxldGUnKTtcbnBvcHVwRGVsZXRlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGZvcm1BZGQgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gICAgcG9wdXBTZWxlY3RvcjogJy5wb3B1cF90eXBlX2FkZCcsXG4gICAgaGFuZGxlRm9ybVN1Ym1pdDogKCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dFRpdGxlID0gaW5wdXRzVGl0bGUudmFsdWU7XG4gICAgICAgIGNvbnN0IGlucHV0VXJsID0gaW5wdXRzVXJsLnZhbHVlO1xuXG4gICAgICAgIGFwaS5hZGRDYXJkKGlucHV0VGl0bGUsIGlucHV0VXJsKS50aGVuKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKHsgbmFtZTogaXRlbS5uYW1lLCBsaW5rOiBpdGVtLmxpbmssIGlkOiBpdGVtLm93bmVyLl9pZCB9LCBnZW5lcmF0ZUNhcmRUZW1wbGF0ZSgpLCB7XG4gICAgICAgICAgICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoeyBuYW1lLCBsaW5rIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcG9wdXBJbWFnZS5vcGVuKG5hbWUsIGxpbmspO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaGFuZGxlRGVsZXRlQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcG9wdXBEZWxldGUub3BlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcGkuZGVsZXRlQ2FyZChpdGVtLl9pZCkudGhlbigoKSA9PiBjYXJkRWxlbWVudC5oYW5kbGVEZWxldGVDYXJkKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBEZWxldGUuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBoYW5kbGVMaWtlQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhcmRFbGVtZW50LmlzTGlrZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBpLmRlbGV0ZUxpa2VDYXJkKGl0ZW0uX2lkKS50aGVuKCgpID0+IGNhcmRFbGVtZW50Lmxpa2VDb3VudE1pbnVzKCkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBpLmxpa2VDYXJkKGl0ZW0uX2lkKS50aGVuKCgpID0+IGNhcmRFbGVtZW50Lmxpa2VDb3VudFBsdXMoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhcmRzTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50LmdlbmVyYXRlQ2FyZCgpKTtcbiAgICAgICAgICAgIGZvcm1BZGQuY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbn0pO1xuXG5mb3JtQWRkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZm9ybUFkZC5vcGVuKCk7XG5cbiAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKHBvcHVwQWRkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9fZmllbGQnKSk7XG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IHBvcHVwQWRkLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc3VibWl0LWJ1dHRvbicpO1xuXG4gICAgZm9ybUFkZFZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xufSk7XG5cbmNvbnN0IGZvcm1FZGl0ID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICAgIHBvcHVwU2VsZWN0b3I6ICcucG9wdXBfdHlwZV9lZGl0JyxcbiAgICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dE5hbWUgPSBpbnB1dHNOYW1lLnZhbHVlO1xuICAgICAgICBjb25zdCBpbnB1dEFib3V0ID0gaW5wdXRzSm9iLnZhbHVlOyBcblxuICAgICAgICBhcGkuZWRpdEluZm8oaW5wdXROYW1lLCBpbnB1dEFib3V0KS50aGVuKChkYXRhKSA9PiBkYXRhKTtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lOiBkYXRhLmZ1bGxuYW1lLCBhYm91dDogZGF0YS5qb2IgfSk7XG4gICAgICAgIGZvcm1FZGl0LmNsb3NlKCk7XG4gICAgfVxufSk7XG5cblxuZnVuY3Rpb24gcHV0UHJvZmlsZUluZm8oKSB7XG4gICAgYXBpLnRha2VVc2VySW5mbygpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lOiBkYXRhLm5hbWUsIGFib3V0OiBkYXRhLmFib3V0LCBhdmF0YXI6IGRhdGEuYXZhdGFyIH0pO1xuICAgIH0pO1xufVxuXG5wdXRQcm9maWxlSW5mbygpO1xuXG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGNvbnN0IHByb2ZpbGUgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuXG4gICAgaW5wdXRzTmFtZS52YWx1ZSA9IHByb2ZpbGUubmFtZTtcbiAgICBpbnB1dHNKb2IudmFsdWUgPSBwcm9maWxlLmFib3V0O1xuXG4gICAgZm9ybUVkaXQub3BlbigpO1xufSk7XG5cbmZvcm1FZGl0LnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGZvcm1BdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gICAgcG9wdXBTZWxlY3RvcjogJy5wb3B1cF90eXBlX2F2YXRhcicsXG4gICAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXRBdmF0YXIgPSBpbnB1dHNBdmF0YXIudmFsdWU7XG5cbiAgICAgICAgYXBpLmNoYW5nZUF2YXRhcihpbnB1dEF2YXRhcikudGhlbigoZGF0YSkgPT4gZGF0YSk7XG4gICAgICAgIHVzZXJJbmZvLnNldEF2YXRhcih7IGF2YXRhcjogZGF0YS5hdmF0YXIgfSk7XG4gICAgICAgIGZvcm1BdmF0YXIuY2xvc2UoKTtcbiAgICB9XG59KTtcblxucHJvZmlsZUF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBpbnB1dHNBdmF0YXIudmFsdWUgPSBhdmF0YXIuc3JjO1xuXG4gICAgZm9ybUF2YXRhci5vcGVuKCk7XG59KTtcblxuZm9ybUF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xuXG5cbmNvbnN0IGZvcm1BZGRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihwYXJhbXMsIHBhcmFtcy5mb3JtQWRkKTtcbmZvcm1BZGRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBmb3JtRWRpdFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHBhcmFtcywgcGFyYW1zLmZvcm1FZGl0KTtcbmZvcm1FZGl0VmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuIl0sInNvdXJjZVJvb3QiOiIifQ==